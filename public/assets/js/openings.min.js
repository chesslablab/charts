const script=document.getElementById("theScript"),scheme=script.getAttribute("data-scheme"),host=script.getAttribute("data-host"),port=script.getAttribute("data-port"),openingForm=document.getElementById("openingForm"),tbody=document.querySelector("tbody");openingForm.querySelector("select").onchange=async e=>{for(e.preventDefault();tbody.firstChild;)tbody.removeChild(tbody.firstChild);fetch(`${scheme}://${host}:${port}/api/openings/${e.target.value}`).then(e=>e.json()).then(e=>{e.forEach((e,t)=>{let o=document.createElement("tr");o.addEventListener("click",function(t){window.location.href=`opening/${e.eco.toLowerCase()}/${e.slug}`});let n=document.createElement("th");n.setAttribute("scope","row");let r=document.createElement("td"),d=document.createElement("td"),a=document.createElement("td"),p=document.createTextNode(t+1),i=document.createTextNode(e.eco),c=document.createTextNode(e.name),l=document.createTextNode(e.movetext);n.appendChild(p),r.appendChild(i),d.appendChild(c),a.appendChild(l),o.appendChild(n),o.appendChild(r),o.appendChild(d),o.appendChild(a),tbody.appendChild(o)})}).catch(e=>{alert("Whoops! Something went wrong, please try again.")})};
